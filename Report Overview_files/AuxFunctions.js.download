function OSCustomMasks_ParseAdvancedOptions(options) {
    try {
        return eval("(" + options + ")");
    }
    catch(err) {
        console.error("Error when parsing advanced options for a CustomMasks input: " + err);
        return {};
    }
}

function OSCustomMasks_UnmaskDate(maskedValue, maskFormat) {
    if(maskedValue == maskFormat)
    {
        return '';
    }
    var finalDate = [];
    var serverDateFormat = _DATE_FORMAT.toLowerCase().split('-');
    var serverSymbol = '-';
    if (serverDateFormat.length == 1) {
        serverDateFormat = _DATE_FORMAT.toLowerCase().split('/');
        serverSymbol = '/';
    }
    var day = serverDateFormat.indexOf('dd');
    var month = serverDateFormat.indexOf('mm');
    var year = serverDateFormat.indexOf('yyyy');

    var maskedDate = maskedValue.toLowerCase().split('-');
    var maskDateFormat = maskFormat.toLowerCase().split('-');
    if (maskedDate.length == 1) {
        maskedDate = maskedValue.toLowerCase().split('/');
        maskDateFormat = maskFormat.toLowerCase().split('/');
    }
    var maskDay = maskDateFormat.indexOf('dd');
    var maskMonth = maskDateFormat.indexOf('mm');
    var maskYear = maskDateFormat.indexOf('yyyy');

    finalDate[day] = maskedDate[maskDay];
    finalDate[month] = maskedDate[maskMonth];
    finalDate[year] = maskedDate[maskYear];
    return finalDate.join(serverSymbol);
}

function OSCustomMasks_MaskDate(value, maskFormat) {
    if (!Inputmask.isValid(value, {
            alias: maskFormat
        }) && value != '') {
        var finalDate = [];
        var serverDateFormat = _DATE_FORMAT.toLowerCase().split('-');
        var valueDate = value.toLowerCase().split('-');
        if (serverDateFormat.length == 1) {
            serverDateFormat = _DATE_FORMAT.toLowerCase().split('/');
            valueDate = value.toLowerCase().split('/');
        }
        var day = serverDateFormat.indexOf('dd');
        var month = serverDateFormat.indexOf('mm');
        var year = serverDateFormat.indexOf('yyyy');

        var maskDateFormat = maskFormat.toLowerCase().split('-');
        var maskSymbol = '-';
        if (maskDateFormat.length == 1) {
            maskDateFormat = maskFormat.toLowerCase().split('/');
            maskSymbol = '/';
        }
        var maskDay = maskDateFormat.indexOf('dd');
        var maskMonth = maskDateFormat.indexOf('mm');
        var maskYear = maskDateFormat.indexOf('yyyy');

        finalDate[maskDay] = valueDate[day];
        finalDate[maskMonth] = valueDate[month];
        finalDate[maskYear] = valueDate[year];
        return finalDate.join(maskSymbol);
    } else
        return value;
}